# 알림 시스템 (Notification System) - 기능 계획서

> 작성일: 2026-02-05  
> 작성자: Unknown  
> 우선순위: 중간

---

## 1. 개요

### 1.1 목적
사용자에게 새로운 복지 혜택 추가, 마감 임박, 맞춤 추천 등 중요한 정보를 적시에 전달하는 알림 시스템입니다. 다양한 채널(인앱, 푸시, 이메일)을 통해 사용자가 복지 혜택을 놓치지 않도록 돕습니다.

### 1.2 배경
- 사용자가 관심 있는 복지 혜택의 변경 사항을 실시간으로 파악하기 어려움
- 복지 신청 마감일을 놓쳐 혜택을 받지 못하는 경우 발생
- 새로운 복지 프로그램이 등록되어도 사용자가 인지하지 못함
- Welfare Recommendation 기능과 연계하여 맞춤형 알림 제공 필요
- 사용자 참여도(engagement) 향상을 위한 능동적 정보 전달 필요

---

## 2. 목표

- [ ] 인앱 알림 센터 UI 구현 (알림 목록 조회, 읽음/삭제 처리)
- [ ] 알림 벨 아이콘 및 읽지 않은 알림 배지 표시 기능 구현
- [ ] 알림 설정 페이지 구현 (알림 유형별 수신 동의, 방해금지 시간 설정)
- [ ] 새 복지 프로그램 등록 시 자동 알림 발송 기능 구현
- [ ] 복지 신청 마감 임박 알림 기능 구현 (D-7, D-3, D-1)
- [ ] 프로필 매칭 복지 발견 시 맞춤 추천 알림 기능 구현
- [ ] Server-Sent Events(SSE) 기반 실시간 알림 전송 구현
- [ ] 푸시 알림 발송 기능 구현 (Firebase Cloud Messaging)
- [ ] 이메일 알림 발송 기능 구현 (선택적)
- [ ] 알림 발송 스케줄러 구현 (예약 발송, 일괄 발송)

---

## 3. 범위

### 3.1 포함 (In Scope)
- 알림 데이터베이스 스키마 설계 (Notification, NotificationSetting, NotificationTemplate)
- 알림 CRUD API 개발 (조회, 읽음 처리, 삭제, 전체 읽음)
- 알림 설정 API 개발 (유형별 수신 설정, 방해금지 시간)
- 알림 센터 UI 컴포넌트 개발
- 알림 벨 드롭다운 및 배지 컴포넌트
- 토스트 알림 컴포넌트 (실시간 알림 수신 시)
- SSE 기반 실시간 알림 연결
- Bull Queue를 활용한 알림 발송 큐 시스템
- FCM 푸시 알림 연동
- 알림 템플릿 관리 시스템

### 3.2 제외 (Out of Scope)
- SMS 알림 발송
- 카카오톡/LINE 등 메신저 알림 연동
- 알림 분석 대시보드 (관리자용)
- A/B 테스트 기반 알림 최적화
- 사용자 행동 기반 알림 개인화 (ML)
- 알림 번역/다국어 지원

---

## 4. 기술적 고려사항

### 4.1 필요 기술 스택
| 영역 | 기술 | 비고 |
|------|------|------|
| Frontend | React, TypeScript, Tailwind CSS | 알림 센터 UI, 설정 페이지 |
| Backend | Node.js, Express | 알림 API, 발송 서비스 |
| Database | PostgreSQL | 알림 데이터, 설정 저장 |
| 실시간 | Server-Sent Events (SSE) | 실시간 알림 전송 |
| 큐 시스템 | Bull Queue, Redis | 대량 알림 발송 처리 |
| 푸시 | Firebase Cloud Messaging | 모바일/웹 푸시 알림 |
| 이메일 | SendGrid (선택) | 이메일 알림 발송 |

### 4.2 의존성
- **User Profile 기능**: 사용자 프로필 기반 맞춤 알림 대상 선정
- **Welfare Recommendation 기능**: 추천 결과 기반 알림 트리거
- **Search Welfare 기능**: 복지 프로그램 마감일 정보 활용
- Redis 서버 (큐 시스템 및 Pub/Sub)

### 4.3 성능 요구사항
- 알림 목록 조회 응답 시간: 200ms 이하
- SSE 연결 유지: 30초 간격 heartbeat
- 대량 알림 발송: 1,000건/분 처리 가능
- 알림 발송 지연: 이벤트 발생 후 10초 이내

---

## 5. 위험 요소 및 대응 방안

### 5.1 위험 요소
| 위험 요소 | 영향도 | 발생 확률 | 대응 방안 |
|----------|--------|----------|----------|
| 대량 알림 발송 시 서버 부하 | 높음 | 중간 | Bull Queue로 비동기 처리, Rate Limiting 적용 |
| SSE 연결 끊김 | 중간 | 높음 | 자동 재연결 로직, 폴링 폴백 구현 |
| FCM 푸시 실패 | 중간 | 낮음 | 재시도 로직, 실패 로그 모니터링 |
| 알림 스팸으로 인한 사용자 피로도 | 높음 | 중간 | 방해금지 시간, 알림 빈도 제한, 묶음 알림 |
| 개인정보 유출 위험 | 높음 | 낮음 | 알림 내용 최소화, 암호화 전송 |

### 5.2 가정 및 제약사항
- 사용자는 알림 수신에 동의한 경우에만 알림을 받음 (Opt-in)
- 브라우저 푸시 알림 권한은 사용자가 직접 허용해야 함
- 이메일 알림은 MVP 이후 추가 개발 고려

---

## 6. 예상 일정

| 단계 | 작업 내용 | 예상 소요 시간 |
|------|----------|---------------|
| 설계 | DB 스키마, API 설계, 컴포넌트 설계 | 2일 |
| 백엔드 | 알림 API, 발송 서비스, 큐 시스템 | 5일 |
| 프론트엔드 | 알림 센터 UI, 설정 페이지, SSE 연결 | 4일 |
| 푸시 연동 | FCM 설정, 토큰 관리, 푸시 발송 | 2일 |
| 테스트 | 단위 테스트, 통합 테스트, E2E 테스트 | 2일 |
| **총 예상 소요 시간** | | **15일 (약 3주)** |

---

## 7. 성공 지표

- 알림 센터 조회 API 응답 시간 200ms 이하 유지
- 실시간 알림 전송 성공률 99% 이상
- 푸시 알림 도달률 95% 이상
- 알림 읽음률 70% 이상
- 알림을 통한 복지 상세 페이지 이동률 40% 이상

---

## 8. 다음 단계

`Cmd+Shift+P` → `BKIT: Design 문서 생성`을 실행하여 설계 문서를 작성하세요.

---
*우선순위: 중간*
